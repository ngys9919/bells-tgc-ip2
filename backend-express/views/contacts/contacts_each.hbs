{{#extends "nav"}}

{{#block "title"}}BELLS-TEST-5{{/block}}

{{#block "content"}}

<h1>Contacts</h1>
<form method="POST">
<div class="mb-3">
    <label>Employees</label>
    <select name="employee_id_selected" class="form-control">
        {{#each employees}}
        {{!-- <option value="{{employee_id}}" multiple --}}
        {{!-- {{#inArray employee_id }}selected{{/inArray}}> --}}
            {{!-- Name: {{name}}  Department: {{department}} --}}
        {{!-- </option> --}}
        <option value="{{this.employee_id}}" 
        {{#eq this.employee_id ../relatedContact.employee_id}}selected{{/eq}}>
            Name: {{this.name}} Department: {{this.department}}
        </option>
        {{/each}}
    </select>
</div>

<button type="submit" class="btn btn-primary">Please select an employee for his/her contacts.</button>

<table class="table">
    <tr>
        <th>Name</th>
        <th>Address1</th>
        <th>Address2</th>
        <th>Address3</th>
        <th>Mobile Phone</th>
        <th>Home Number</th>
        <th>Personal Email</th>
    </tr>
    {{!-- {{#each employee}} --}}
    <tr>
        {{!-- Creating the route to view all the employees with their contacts --}}
        {{!-- Obtaining the Results with Normal Tables --}}
        <td>{{employee.name}}</td>
        <td>{{relatedContact.address1}}</td>
        <td>{{relatedContact.address2}}</td>
        <td>{{relatedContact.address3}}</td>
        <td>{{relatedContact.mobile_phone}}</td>
        <td>{{relatedContact.home_phone}}</td>
        <td>{{relatedContact.personal_email}}</td>
    </tr>
    {{!-- {{/each}} --}}
</table>        
</form>
{{/block}}
{{/extends}}
